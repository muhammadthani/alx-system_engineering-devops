#!/bin/bash
# Script to configure Nginx to run as nginx user

# Stop Nginx if it's already running
systemctl stop nginx

# Backup the original Nginx configuration
cp /etc/nginx/nginx.conf /etc/nginx/nginx.conf.bak

# Change the user directive to 'nginx'
sed -i 's/user\s*nginx;/user nginx;/' /etc/nginx/nginx.conf

# Change the listen directive to listen on all active IPs on port 8080
sed -i 's/listen\s*80;/listen *:8080;/' /etc/nginx/sites-available/default

# Restart Nginx
systemctl start nginx
